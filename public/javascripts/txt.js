var txt = {
    "Title": {
        "CH": "玉衡杯数据库",
        "EN": "HomDGCat Wiki"
    },
    "Affix": {
        "CH": " | <color style='color:#0066FF;'>玉衡杯数据库 homdgcat.wiki</color> | <color style='color:#0066FF;'>bilibili@妮可少女</color> | <color style='color:#0066FF;'>t.me/homdgcat</color>",
        "EN": " | <color style='color:#0066FF;'>homdgcat.wiki</color> | <color style='color:#0066FF;'>t.me/homdgcat</color> | <color style='color:#0066FF;'>X@_homdgcat</color>"
    },
    "Subtitle": {
        "CH": "<p><b><span style='white-space:pre;'><a href='https://space.bilibili.com/3537104994831140' target='_blank'>bilibili@妮可少女</a> | <a href='http://t.me/homdgcat' target='_blank'>t.me/homdgcat</a></span></b></p>",
        "EN": "<p><b><span style='white-space:pre;'><a href='http://t.me/homdgcat' target='_blank'>t.me/homdgcat</a> | <a href='https://www.twitter.com/_homdgcat' target='_blank'>X@_homdgcat</a></span></b></p>"
    },
    "ChooseTitle": {
        "CH": "（星穹铁道）",
        "EN": "(Star Rail)"
    },
    "Page": {
        "CH": "<p><b>【切换页面】</b></p>",
        "EN": "<p><b>[ Pages ]</b></p>",
    },
    "Home_Lang": {
        "GI": {
            "CH": "<a href='/gi?lang=EN'>Switch to English</a>",
            "EN": "<a href='/gi?lang=CH'>切换至中文</a>"
        },
        "SR": {
            "CH": "<a href='/sr?lang=EN'>Switch to English</a>",
            "EN": "<a href='/sr?lang=CH'>切换至中文</a>"
        }
    },
    "Lang": {
        "CH": "<a href='?lang=EN'>Switch to English</a>",
        "EN": "<a href='?lang=CH'>切换至中文</a>"
    },
    "Home_Sections": [
        {
            "CH": "原神",
            "EN": "Genshin"
        },
        {
            "CH": "星穹铁道",
            "EN": "Star Rail"
        },
        {
            "CH": "简介",
            "EN": "About"
        },
    ],
    "About": {
        "CH": "玉衡杯数据库部分依托玉衡杯网站建立，数据由<b>妮可少女</b>提供",
        "EN": "HomDGCat Wiki (formerly the Yuheng Cup Database) is built partly upon the site of Yuheng Cup, a Keqing-centered speedrunning contest held by Chinese Keqing players. The database is maintained by <b>HomDGCat</b>."
    },
    "About_2": {
        "CH": "若发现数据有误或有建议<br>↓<br><a href='https://space.bilibili.com/3537104994831140' target='_blank'>(bilibili)</a> <a href='http://t.me/homdgcat'>(Telegram)</a> <a href='https://www.twitter.com/_homdgcat' target='_blank'>(Twitter)</a> <a href='https://www.reddit.com/user/homdgcat/' target='_blank'>(Reddit)</a>",
        "EN": "If you spot errors or have suggestions<br>↓<br><a href='https://space.bilibili.com/3537104994831140' target='_blank'>(bilibili)</a> <a href='http://t.me/homdgcat'>(Telegram)</a> <a href='https://www.twitter.com/_homdgcat' target='_blank'>(Twitter)</a> <a href='https://www.reddit.com/user/homdgcat/' target='_blank'>(Reddit)</a>"
    },
    "DidYouKnow": {
        "CH": "小知识",
        "EN": "Did You Know?"
    },
    "Coming_Soon": {
        "CH": "敬请期待",
        "EN": "Coming Soon"
    },
    "Mon_Head": [
        {
            "CH": "数据",
            "EN": "Stats"
        },
        {
            "CH": "一图流",
            "EN": ""
        },
        {
            "CH": "技能",
            "EN": "Skills"
        },
        {
            "CH": "伤害计算",
            "EN": "Skill DMG"
        },
        {
            "CH": "状态",
            "EN": "Effects"
        },
    ],
    "SkillPhase": [
        {
            "CH": "废弃",
            "EN": "Unused"
        },
        {
            "CH": "阶段一",
            "EN": "Phase 1"
        },
        {
            "CH": "阶段二",
            "EN": "Phase 2"
        },
        {
            "CH": "阶段三",
            "EN": "Phase 3"
        },
    ],
    "MonsterDMG": [
        {
            "CH": "敌方等级",
            "EN": "Enemy Level"
        },
        {
            "CH": "角色防御力",
            "EN": "Character DEF"
        },
        {
            "CH": "成长曲线",
            "EN": "Growth Curve"
        },
        {
            "CH": "精英组别",
            "EN": "Elite Group"
        },
    ],
    "MonsterDMG_CTRL": [
        {
            "CH": "计算",
            "EN": "Calculate"
        },
        {
            "CH": "重置",
            "EN": "Reset"
        },
    ],
    "MonsterDEF": [
        {
            "CH": "星穹铁道 · 防御力伤害乘区",
            "EN": "Star Rail - DEF Damage Multiplier"
        },
        {
            "CH": "原神 · 防御力伤害乘区",
            "EN": "Genshin - DEF Damage Multiplier"
        },
    ],
    "MonsterLowerStats": [
        {
            "CH": "数值",
            "EN": "Stats"
        },
        {
            "CH": "伤害抗性",
            "EN": "Damage RES"
        },
        {
            "CH": "状态抗性",
            "EN": "Debuff RES"
        }
    ],
    "Immune": {
        "CH": "<b>∞</b>",
        "EN": "<b>∞</b>"
    },
    "BaseStatInput": [
        {
            "CH": "等级",
            "EN": "Level"
        },
        {
            "CH": "成长曲线",
            "EN": "Curve"
        },
        {
            "CH": "精英组别",
            "EN": "Elite Group"
        },
    ],
    "StatusType": {
        "Buff": {
            "CH": "增益效果",
            "EN": "Buff"
        },
        "Debuff": {
            "CH": "负面效果",
            "EN": "Debuff"
        },
        "Other": {
            "CH": "其他效果",
            "EN": "Other"
        }
    },
    "CanNotDispel": {
        "CH": "⚠ <b>不可解除</b>",
        "EN": "⚠ <b>Unremoveable</b>"
    },
    "HitSP": {
        "CH": "受击回能：",
        "EN": "Hit Revive: "
    },
    "MonLV": {
        "CH": "敌方等级：",
        "EN": "Enemy Level: "
    },
    "AvatarDEF": {
        "CH": "角色防御力：",
        "EN": "Character DEF: "
    },
    "DPC_S": {
        "CH": "每轮输出（单体）：",
        "EN": "DPC (Single): "
    },
    "DPC_M": {
        "CH": "每轮输出（群攻）：",
        "EN": "DPC (AoE): "
    },
    "Cycle": {
        "CH": "总轮数：",
        "EN": "Total Cycles: "
    },
    "Cycle55": {
        "CH": "总轮数：4+4",
        "EN": "Total Cycles: 4+4"
    },
    "Wave": [
        {
            "CH": "第一波",
            "EN": "WAVE 1"
        },
        {
            "CH": "第二波",
            "EN": "WAVE 2"
        },
        {
            "CH": "第三波",
            "EN": "WAVE 3"
        },
        {
            "CH": "第四波",
            "EN": "WAVE 4"
        },
        {
            "CH": "第五波",
            "EN": "WAVE 5"
        },
        {
            "CH": "第六波",
            "EN": "WAVE 6"
        }
    ],
    "Recommended": [
        {
            "CH": "上半 ",
            "EN": "Upper Half "
        },
        {
            "CH": "下半 ",
            "EN": "Lower Half "
        }
    ],
    "Keep": {
        "CH": "最多#个在场",
        "EN": "Max # on field"
    },
    "MoC": {
        "CH": "混沌回忆",
        "EN": "Memory of Chaos"
    },
    "Fiction": {
        "CH": "虚构叙事",
        "EN": "Pure Fiction"
    },
    "HS": {
        "CH": "<p><b>玉衡杯数据库 - bilibili@妮可少女 | t.me/homdgcat</b></p>",
        "EN": "<p><b>HomDGCat Wiki - t.me/homdgcat</b></p>"
    },
    "Links_": {
        "CH": "<b>[ homdgcat.wiki ]</b>",
        "EN": "<b>[ homdgcat.wiki ]</b>"
    },
    "Chart_Title": {
        "CH": "第#层满星输出演化",
        "EN": "Floor # Full-Star DMG Trend"
    },
    "Chart_Title_": {
        "CH": "第#层总血量演化",
        "EN": "Floor # Total HP Trend"
    },
    "Chart_Subtitle": {
        "CH": "玉衡杯数据库 homdgcat.wiki",
        "EN": "HomDGCat Wiki - homdgcat.wiki"
    },
    "Fiction_HP": {
        "CH": "总血量",
        "EN": "Total HP"
    },
    "AchNum": {
        "CH": "总成就数 (#)：",
        "EN": "Total Count (#): "
    },
    "AllAch": {
        "CH": "全部成就",
        "EN": "All Achievements"
    },
    "NewAch": {
        "CH": "新增成就",
        "EN": "New Achievements"
    },
    "Avatar_Head": [
        {
            "CH": "基本信息",
            "EN": "Basic Info"
        },
        {
            "CH": "技能",
            "EN": "Skills"
        },
        {
            "CH": "行迹",
            "EN": "Traces"
        },
        {
            "CH": "星魂",
            "EN": "Eidolons"
        },
        {
            "CH": "故事",
            "EN": "Stories"
        },
        {
            "CH": "语音",
            "EN": "Voicelines"
        },
        {
            "CH": "妮可少女的研究",
            "EN": "HomDGCat's Notes"
        }
    ],
    "Avatar_Mats": {
        "CH": "角色材料",
        "EN": "Materials"
    },
    "Avatar_Stats": {
        "CH": "角色数值",
        "EN": "Stats"
    },
    "Avatar_Story": {
        "CH": "角色故事 ",
        "EN": "Character Story "
    },
    "StatVerChoose": {
        "CH": "版本",
        "EN": "Ver"
    },
    "AddProp": {
        "CH": "属性强化",
        "EN": "Stat Boosts"
    },
    "Avatar_StanceBreak": {
        "CH": "技能削韧：",
        "EN": "Toughness Break: "
    },
    "Avatar_StanceBreak_Specific": [
        {
            "CH": "单体 ",
            "EN": "Single "
        },
        {
            "CH": "所有 ",
            "EN": "All  "
        },
        {
            "CH": "相邻 ",
            "EN": "Adjacent  "
        }
    ]
}

var elemcolor = {
    "None": "ffffff",
    "Phys": "ffffff",
    "Elec": "ffacff",
    "Fire": "ff8877",
    "Ice": "8addff",
    "Wind": "97ffb7",
    "Quantum": "7f9aea",
    "Imaginary": "ffe779",
}

var elemlist = [
    "Phys",
    "Fire",
    "Elec",
    "Ice",
    "Wind",
    "Quantum",
    "Imaginary"
]


var debufflist = [
    {
        "ID": "CTRL",
        "Name": {
            "CH": "控制",
            "EN": "Control"
        },
        "Icon": 'Icon1307Dot_B'
    },
    {
        "ID": "Frozen",
        "Name": {
            "CH": "冻结",
            "EN": "Frozen"
        },
        "Icon": 'IconDotFrozen_B'
    },
    {
        "ID": "Entangle",
        "Name": {
            "CH": "纠缠",
            "EN": "Entanglement"
        },
        "Icon": 'IconDotTangle_B'
    },
    {
        "ID": "Confine",
        "Name": {
            "CH": "禁锢",
            "EN": "Imprisonment"
        },
        "Icon": 'IconDotCage_B'
    },
    {
        "ID": "Burn",
        "Name": {
            "CH": "灼烧",
            "EN": "Burn"
        },
        "Icon": 'IconDotBurn_B'
    },
    {
        "ID": "Shock",
        "Name": {
            "CH": "触电",
            "EN": "Shock"
        },
        "Icon": 'IconDotElectric_B'
    },
    {
        "ID": "Wind",
        "Name": {
            "CH": "风化",
            "EN": "Wind Shear"
        },
        "Icon": 'IconDotPoison_B'
    }
]

var props = {
    "HP": {
        "CH": "生命值",
        "EN": "HP"
    },
    "ATK": {
        "CH": "攻击力",
        "EN": "ATK"
    },
    "DEF": {
        "CH": "防御力",
        "EN": "DEF"
    },
    "Stance": {
        "CH": "韧性",
        "EN": "Toughness"
    },
    "SPD": {
        "CH": "速度",
        "EN": "SPD"
    },
    "StatusRES": {
        "CH": "效果抵抗",
        "EN": "Eff RES"
    },
    "StatusProb": {
        "CH": "效果命中",
        "EN": "Eff Hit Rate"
    },
}

var links = [
    {
        "Name": {
            "CH": "<b>主页</b>",
            "EN": "<b>Main Page</b>"
        },
        "Link": "/sr"
    },
    {
        "Name": {
            "CH": "怪物",
            "EN": "Monsters"
        },
        "Link": "/sr/monster"
    },
    {
        "Name": {
            "CH": "角色 光锥 遗器",
            "EN": "Characters Lightcones Relics"
        },
        "Link": "/sr/char"
    },
    {
        "Name": {
            "CH": "混沌回忆",
            "EN": "Memory of Chaos"
        },
        "Link" : "/sr/chaos"
    },
    {
        "Name": {
            "CH": "虚构叙事",
            "EN": "Pure Fiction"
        },
        "Link" : "/sr/fiction"
    },
    {
        "Name": {
            "CH": "成就",
            "EN": "Achievements"
        },
        "Link" : "/sr/ach"
    },
    {
        "Name": {
            "CH": "加载提示",
            "EN": "Loading Tips"
        },
        "Link" : "/sr/load"
    },
    {
        "Name": {
            "CH": "模拟宇宙 · 祝福",
            "EN": "SU Blessings"
        },
        "Link" : "/sr/blessing"
    },
    {
        "Name": {
            "CH": "模拟宇宙 · 奇物",
            "EN": "SU Curios"
        },
        "Link" : "/sr/curio"
    },
]

function popLinks(l) {
    poplayer({
        header: '',
        class: 'yuhengcup',
        width: '95%',
        template: [
            {
                h3: txt.Title[l],
                style: {
                    color: '#27363E',
                    'margin-top': '15px',
                    'margin-bottom': '45px',
                    'font-size': '40px',
                }
            },
            {
                p: txt.ChooseTitle[l],
                style: {
                    color: '#27363E',
                    'margin-top': '-28px',
                    'margin-bottom': '22px',
                    'font-size': '23px',
                    'text-align': 'center'
                },
            },
            {
                section: function (g) {
                    $(g.container).render({
                        data: links,
                        template: {
                            schedule: {
                                a: function (d) {
                                    return d.data.Link + '?lang=' + l
                                },
                                t: {
                                    span: `[[Name/${l}]]`,
                                    style: {
                                        'font-size': '19px',
                                        'margin': 'auto'
                                    }
                                },
                                style: {
                                    display: 'block'
                                }
                            },
                            style: {
                                'text-align': 'center',
                                padding: '10px 0px',
                                border: '1px solid #333',
                                'border-radius': '5px',
                                cursor: 'pointer',
                                margin: '5px',
                            }
                        }
                    })
                },
                style: {
                    display: 'flex',
                    'flex-wrap': 'wrap',
                    'justify-content': 'space-evenly',
                    width: '100%',
                    margin: '0px auto 60px'
                }
            }
        ]
    })
}

function mod(n, m) {
    return ((n % m) + m) % m
}

function lm(lis, i) {
    return lis[mod(i, lis.length)]
}

var IS_SW = 0